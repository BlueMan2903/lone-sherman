/* src/game/components/Unit/Unit.module.css */

.unitContainer {
  position: absolute;
  display: flex;
  justify-content: center;
  align-items: center;
  pointer-events: none; /* Initially, so units don't block hex clicks. Change later for unit selection. */
  z-index: 10; /* Ensure units are above hexes */
  transition: left 1s ease-in-out, top 1s ease-in-out;
}

.unitImage {
  width: 100%;
  height: 100%;
  object-fit: contain;
  transition: transform 0.3s ease-out, filter 0.3s ease-out;
  transform: rotate(var(--rotation-angle, 0deg)); /* Use custom property */
}

.unitContainer.hullDown .unitImage {
  filter: brightness(70%);
}

.unitContainer.targeting {
  pointer-events: auto; /* Enable clicks */
  cursor: crosshair;
}

/* This is the style for the tank sprite itself when destroyed */
.unitContainer.destroyed .unitImage {
  filter: grayscale(80%) brightness(60%);
  transform: rotate(var(--rotation-angle, 0deg)) skewX(-10deg) translateY(5px);
}

/* This is for the explosion animation spritesheet */
.explosionEffect {
  position: absolute;
  width: 75px; /* Making the effect larger than the unit */
  height: 75px;
  top: calc(20% + 25px);
  left: 50%;
  transform: translate(-50%, -50%); /* Center the explosion on the unit */
  background-repeat: no-repeat;
  background-size: contain; /* Ensure the GIF fits within the container */
  z-index: 12;
}

/* This makes the explosion visible when the unit is destroyed */
.unitContainer.destroyed .explosionEffect {
  opacity: 1;
}

.bounceEffect {
  position: absolute;
  width: 50px;
  height: 50px;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  background-repeat: no-repeat;
  background-size: contain;
  z-index: 13; /* Above the unit, below other effects */
  opacity: 0.9;
}

.hitEffect {
  position: absolute;
  width: 60px;
  height: 60px;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  background-repeat: no-repeat;
  background-size: contain;
  z-index: 14; /* High z-index to be on top */
  opacity: 0.9;
  animation: hitEffectFadeOut 1s forwards;
}

@keyframes hitEffectFadeOut {
  0% { opacity: 0.9; }
  100% { opacity: 0; display: none; }
}

/* The keyframes to play the explosion */
/* No keyframes needed for GIF */

.fireEffect {
  position: absolute;
  width: 60px;
  height: 60px;
  top: 45%;
  left: 50%;
  transform: translate(-50%, -50%);
  background-repeat: no-repeat;
  background-size: contain;
  z-index: 11;
  opacity: 0;
}

.smokeEffect {
  position: absolute;
  width: 50px;
  height: 50px;
  top: 40%; /* Adjust vertical position */
  left: 50%;
  transform: translate(-50%, -50%);
  background-repeat: no-repeat;
  background-size: contain;
  z-index: 11; /* Below hit/explosion but above unit */
  opacity: 0;
}

.smokeEffect.fadeOut {
  animation: fadeOut 1s forwards; /* Fade out over 1 second */
}

@keyframes fadeOut {
  from { opacity: 0.8; }
  to { opacity: 0; display: none; }
}

.fadeIn {
  animation: fadeIn 0.8s ease-in forwards;
}

@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 0.8; } /* Fade to a semi-transparent smoke */
}
